{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React from 'react';\n\nclass VideoPlayer extends React.Component {\n  static defaultProps = {\n    id: 'vid1',\n    className: 'video-js vjs-default-skin',\n    width: '640',\n    height: '360',\n    setup: {\n      techOrder: ['youtube'],\n      sources: [\n        {\n          type: 'video/youtube',\n          src: 'https://www.youtube.com/watch?v=TeccAtqd5K8'\n        }\n      ]\n    },\n    innerRef: React.createRef()\n  };\n\n  videoNode = this.props.innerRef;\n\n  actions = {};\n\n  /* TODO\n   * Fallbacks do not currently work\n   * videojs-youtube defaults to a different version of video.js than imported\n   */\n  componentDidMount() {\n    if (videojs) {\n      this.instantiate();\n    } else if (!videojs.getTech('youtube')) {\n      this.youtubeFallback();\n    } else {\n      this.videoJsFallback();\n    }\n  }\n\n  // destroy player on unmount\n  componentWillUnmount() {\n    if (this.player) {\n      this.player.dispose();\n    }\n  }\n\n  videoJsFallback = () => import('video.js').then(this.youtubeFallback);\n\n  youtubeFallback = () => {\n    import('videojs-youtube').then(() => {\n      this.instantiate();\n    });\n  };\n\n  instantiate = () => {\n    this.player = videojs(\n      this.videoNode.current,\n      this.props.setup,\n      this.props.onReadyCheck ? () => this.props.onReadyCheck(this) : undefined\n    );\n    Object.keys(this.props.controls).forEach(key => {\n      this.player.on([key], this.props.controls[key]);\n    });\n  };\n\n  // wrap the player in a div with a `data-vjs-player` attribute\n  // so videojs won't create additional wrapper in the DOM\n  // see https://github.com/videojs/video.js/pull/3856\n  render() {\n    const { setup, onReadyCheck, innerRef, controls, ...rest } = this.props;\n    return (\n      <div data-vjs-player>\n        <video\n          className=\"video-js\"\n          controls\n          preload=\"auto\"\n          {...rest}\n          ref={this.videoNode}\n        />\n      </div>\n    );\n  }\n}\n\nexport default VideoPlayer;\n"],"names":["VideoPlayer","props","innerRef","then","youtubeFallback","instantiate","player","videojs","videoNode","current","setup","onReadyCheck","undefined","Object","keys","controls","forEach","key","on","getTech","videoJsFallback","dispose","rest","React","Component","id","className","width","height","techOrder","sources","type","src","createRef"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEMA;;;;;;;;;;;;;;;;;;gEAkBQ,MAAKC,KAAL,CAAWC;;8DAEb;;sEAuBQ;aAAM,OAAO,qBAAP,EAAmBC,IAAnB,CAAwB,MAAKC,eAA7B,CAAN;;;sEAEA,YAAM;aACf,qBAAP,EAA0BD,IAA1B,CAA+B,YAAM;cAC9BE,WAAL;OADF;;;kEAKY,YAAM;YACbC,MAAL,GAAcC,OAAO,CACnB,MAAKC,SAAL,CAAeC,OADI,EAEnB,MAAKR,KAAL,CAAWS,KAFQ,EAGnB,MAAKT,KAAL,CAAWU,YAAX,GAA0B;eAAM,MAAKV,KAAL,CAAWU,YAAX,+BAAN;OAA1B,GAAgEC,SAH7C,CAArB;MAKAC,MAAM,CAACC,IAAP,CAAY,MAAKb,KAAL,CAAWc,QAAvB,EAAiCC,OAAjC,CAAyC,UAAAC,GAAG,EAAI;cACzCX,MAAL,CAAYY,EAAZ,CAAe,CAACD,GAAD,CAAf,EAAsB,MAAKhB,KAAL,CAAWc,QAAX,CAAoBE,GAApB,CAAtB;OADF;;;;;;;;;;;;;wCA/BkB;UACdV,OAAJ,EAAa;aACNF,WAAL;OADF,MAEO,IAAI,CAACE,OAAO,CAACY,OAAR,CAAgB,SAAhB,CAAL,EAAiC;aACjCf,eAAL;OADK,MAEA;aACAgB,eAAL;;;;;;2CAKmB;UACjB,KAAKd,MAAT,EAAiB;aACVA,MAAL,CAAYe,OAAZ;;;;;;;;6BA0BK;wBACsD,KAAKpB,KAD3D;UACCS,KADD,eACCA,KADD;UACQC,YADR,eACQA,YADR;UACsBT,QADtB,eACsBA,QADtB;UACgCa,QADhC,eACgCA,QADhC;UAC6CO,IAD7C;;aAGL;;SACE;QACE,SAAS,EAAC,UADZ;QAEE,QAAQ,MAFV;QAGE,OAAO,EAAC;SACJA,IAJN;QAKE,GAAG,EAAE,KAAKd;SANd,CADF;;;;;EAnEsBe,KAAK,CAACC;;gBAA1BxB,6BACkB;EACpByB,EAAE,EAAE,MADgB;EAEpBC,SAAS,EAAE,2BAFS;EAGpBC,KAAK,EAAE,KAHa;EAIpBC,MAAM,EAAE,KAJY;EAKpBlB,KAAK,EAAE;IACLmB,SAAS,EAAE,CAAC,SAAD,CADN;IAELC,OAAO,EAAE,CACP;MACEC,IAAI,EAAE,eADR;MAEEC,GAAG,EAAE;KAHA;GAPS;EAcpB9B,QAAQ,EAAEqB,KAAK,CAACU,SAAN;;;;;"}