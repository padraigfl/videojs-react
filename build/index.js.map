{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React from 'react';\n\nclass VideoPlayer extends React.Component {\n  static defaultProps = {\n    id: 'vid1',\n    className: 'video-js vjs-default-skin',\n    width: '640',\n    height: '360',\n    setup: {\n      techOrder: ['youtube'],\n      sources: [\n        {\n          type: 'video/youtube',\n          src: 'https://www.youtube.com/watch?v=TeccAtqd5K8'\n        }\n      ]\n    },\n    innerRef: React.createRef()\n  };\n\n  videoNode = this.props.innerRef;\n\n  actions = {};\n\n\n  componentDidMount() {\n    if (!videojs) {\n      this.setState({ noVideoJs: 'videojs' })\n    } else if (this.needsYoutube() && !this.hasYoutube()) {\n      this.setState({ noVideoJs: 'youtube' })\n    } else {\n      this.instantiate();\n    }\n  }\n\n  // destroy player on unmount\n  componentWillUnmount() {\n    if (this.player) {\n      this.player.dispose();\n    }\n  }\n\n  needsYoutube = () => this.props.youtube || this.props.setup.techOrder.find(tech => tech.toLowerCase === 'youtube');\n\n\n  hasYoutube = () => videojs && videojs.getTech('youtube')\n\n  /* TODO\n  * Fallbacks do not currently work\n  * videojs-youtube defaults to a different version of video.js than imported\n  */\n\n  // videoJsFallback = () => import('video.js').then(this.youtubeFallback);\n\n  // youtubeFallback = () => {\n  //   if (this.props.youtube || this.props.setup.techOrder.find(tech => tech.toLowerCase === 'youtube')) {\n  //     import('videojs-youtube').then(() => {\n  //       this.instantiate();\n  //     });\n  //   }\n  // };\n\n  instantiate = () => {\n    this.player = videojs(\n      this.videoNode.current,\n      this.props.setup,\n      this.props.onReadyCheck ? () => this.props.onReadyCheck(this) : undefined\n    );\n    this.mapControls();\n  };\n\n  mapControls = () => {\n    Object.keys(this.props.controls).forEach(key => {\n      this.player.on([key], this.props.controls[key]);\n    });\n  }\n\n  // wrap the player in a div with a `data-vjs-player` attribute\n  // so videojs won't create additional wrapper in the DOM\n  // see https://github.com/videojs/video.js/pull/3856\n  render() {\n    const { setup, onReadyCheck, innerRef, controls, ...rest } = this.props;\n    return (\n      <div data-vjs-player>\n        <video\n          className=\"video-js\"\n          controls\n          preload=\"auto\"\n          {...rest}\n          ref={this.videoNode}\n        />\n      </div>\n    );\n  }\n}\n\nexport default VideoPlayer;\n"],"names":["VideoPlayer","props","innerRef","youtube","setup","techOrder","find","tech","toLowerCase","videojs","getTech","player","videoNode","current","onReadyCheck","undefined","mapControls","Object","keys","controls","forEach","key","on","setState","noVideoJs","needsYoutube","hasYoutube","instantiate","dispose","rest","React","Component","id","className","width","height","sources","type","src","createRef"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAEMA;;;;;;;;;;;;;;;;;;kEAkBQ,MAAKC,KAAL,CAAWC;;gEAEb;;qEAoBK;EAAA,aAAM,MAAKD,KAAL,CAAWE,OAAX,IAAsB,MAAKF,KAAL,CAAWG,KAAX,CAAiBC,SAAjB,CAA2BC,IAA3B,CAAgC,UAAAC,IAAI;EAAA,eAAIA,IAAI,CAACC,WAAL,KAAqB,SAAzB;EAAA,OAApC,CAA5B;EAAA;;mEAGF;EAAA,aAAMC,OAAO,IAAIA,OAAO,CAACC,OAAR,CAAgB,SAAhB,CAAjB;EAAA;;oEAiBC,YAAM;EAClB,YAAKC,MAAL,GAAcF,OAAO,CACnB,MAAKG,SAAL,CAAeC,OADI,EAEnB,MAAKZ,KAAL,CAAWG,KAFQ,EAGnB,MAAKH,KAAL,CAAWa,YAAX,GAA0B;EAAA,eAAM,MAAKb,KAAL,CAAWa,YAAX,+BAAN;EAAA,OAA1B,GAAgEC,SAH7C,CAArB;;EAKA,YAAKC,WAAL;EACD;;oEAEa,YAAM;EAClBC,MAAAA,MAAM,CAACC,IAAP,CAAY,MAAKjB,KAAL,CAAWkB,QAAvB,EAAiCC,OAAjC,CAAyC,UAAAC,GAAG,EAAI;EAC9C,cAAKV,MAAL,CAAYW,EAAZ,CAAe,CAACD,GAAD,CAAf,EAAsB,MAAKpB,KAAL,CAAWkB,QAAX,CAAoBE,GAApB,CAAtB;EACD,OAFD;EAGD;;;;;;;0CAlDmB;EAClB,UAAI,CAACZ,OAAL,EAAc;EACZ,aAAKc,QAAL,CAAc;EAAEC,UAAAA,SAAS,EAAE;EAAb,SAAd;EACD,OAFD,MAEO,IAAI,KAAKC,YAAL,MAAuB,CAAC,KAAKC,UAAL,EAA5B,EAA+C;EACpD,aAAKH,QAAL,CAAc;EAAEC,UAAAA,SAAS,EAAE;EAAb,SAAd;EACD,OAFM,MAEA;EACL,aAAKG,WAAL;EACD;EACF;;;;6CAGsB;EACrB,UAAI,KAAKhB,MAAT,EAAiB;EACf,aAAKA,MAAL,CAAYiB,OAAZ;EACD;EACF;;;EAqCD;EACA;EACA;+BACS;EAAA,wBACsD,KAAK3B,KAD3D;EAAA,UACCG,KADD,eACCA,KADD;EAAA,UACQU,YADR,eACQA,YADR;EAAA,UACsBZ,QADtB,eACsBA,QADtB;EAAA,UACgCiB,QADhC,eACgCA,QADhC;EAAA,UAC6CU,IAD7C;;EAEP,aACE;EAAK;EAAL,SACE;EACE,QAAA,SAAS,EAAC,UADZ;EAEE,QAAA,QAAQ,MAFV;EAGE,QAAA,OAAO,EAAC;EAHV,SAIMA,IAJN;EAKE,QAAA,GAAG,EAAE,KAAKjB;EALZ,SADF,CADF;EAWD;;;;IA3FuBkB,KAAK,CAACC;;kBAA1B/B,6BACkB;EACpBgC,EAAAA,EAAE,EAAE,MADgB;EAEpBC,EAAAA,SAAS,EAAE,2BAFS;EAGpBC,EAAAA,KAAK,EAAE,KAHa;EAIpBC,EAAAA,MAAM,EAAE,KAJY;EAKpB/B,EAAAA,KAAK,EAAE;EACLC,IAAAA,SAAS,EAAE,CAAC,SAAD,CADN;EAEL+B,IAAAA,OAAO,EAAE,CACP;EACEC,MAAAA,IAAI,EAAE,eADR;EAEEC,MAAAA,GAAG,EAAE;EAFP,KADO;EAFJ,GALa;EAcpBpC,EAAAA,QAAQ,EAAE4B,KAAK,CAACS,SAAN;EAdU;;;;;;;;"}