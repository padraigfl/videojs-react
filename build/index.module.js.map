{"version":3,"file":"index.module.js","sources":["../src/index.js"],"sourcesContent":["import React from 'react';\n\nclass VideoPlayer extends React.Component {\n  static defaultProps = {\n    id: 'vid1',\n    className: 'video-js vjs-default-skin',\n    width: '640',\n    height: '360',\n    setup: {\n      techOrder: ['youtube'],\n      sources: [\n        {\n          type: 'video/youtube',\n          src: 'https://www.youtube.com/watch?v=TeccAtqd5K8'\n        }\n      ]\n    },\n    innerRef: React.createRef(),\n    accessVideo: () => {}\n  };\n\n  state = {};\n\n  componentDidMount() {\n    if (!videojs) {\n      this.setState({ noVideoJs: 'videojs' });\n    } else if (this.needsYoutube() && !this.hasYoutube()) {\n      this.setState({ noVideoJs: 'youtube' });\n    } else {\n      this.instantiate();\n    }\n  }\n\n  // destroy player on unmount\n  componentWillUnmount() {\n    if (this.player) {\n      this.props.setVideo(null);\n      this.player.dispose();\n    }\n  }\n\n  needsYoutube = () =>\n    this.props.youtube ||\n    this.props.setup.techOrder.find(tech => tech.toLowerCase === 'youtube');\n\n  hasYoutube = () => videojs && videojs.getTech('youtube');\n\n  /* TODO\n   * Fallbacks do not currently work\n   * videojs-youtube defaults to a different version of video.js than imported\n   */\n\n  // videoJsFallback = () => import('video.js').then(this.youtubeFallback);\n\n  // youtubeFallback = () => {\n  //   if (this.props.youtube || this.props.setup.techOrder.find(tech => tech.toLowerCase === 'youtube')) {\n  //     import('videojs-youtube').then(() => {\n  //       this.instantiate();\n  //     });\n  //   }\n  // };\n\n  instantiate = () => {\n    this.player = videojs(\n      this.props.innerRef.current,\n      this.props.setup,\n      this.props.onReadyCheck ? () => this.props.onReadyCheck(this) : undefined\n    );\n    this.props.accessVideo(this.player);\n  };\n\n  // wrap the player in a div with a `data-vjs-player` attribute\n  // so videojs won't create additional wrapper in the DOM\n  // see https://github.com/videojs/video.js/pull/3856\n  render() {\n    const { setup, onReadyCheck, innerRef, controls, ...rest } = this.props;\n    if (this.state.noVideoJs === 'videojs') {\n      return <div>Wheres Videojs?</div>;\n    }\n    if (this.state.noVideoJs === 'youtube') {\n      return <div>Wheres the youtube support</div>;\n    }\n    return (\n      <div data-vjs-player>\n        <video\n          className=\"video-js\"\n          controls\n          preload=\"auto\"\n          {...rest}\n          ref={this.props.innerRef}\n        />\n      </div>\n    );\n  }\n}\n\nexport default VideoPlayer;\n"],"names":["VideoPlayer","props","youtube","setup","techOrder","find","tech","toLowerCase","videojs","getTech","player","innerRef","current","onReadyCheck","undefined","accessVideo","setState","noVideoJs","needsYoutube","hasYoutube","instantiate","setVideo","dispose","controls","rest","state","React","Component","id","className","width","height","sources","type","src","createRef"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEMA;;;;;;;;;;;;;;;;;;4DAmBI;;mEAoBO;aACb,MAAKC,KAAL,CAAWC,OAAX,IACA,MAAKD,KAAL,CAAWE,KAAX,CAAiBC,SAAjB,CAA2BC,IAA3B,CAAgC,UAAAC,IAAI;eAAIA,IAAI,CAACC,WAAL,KAAqB,SAAzB;OAApC,CAFa;;;iEAIF;aAAMC,OAAO,IAAIA,OAAO,CAACC,OAAR,CAAgB,SAAhB,CAAjB;;;kEAiBC,YAAM;YACbC,MAAL,GAAcF,OAAO,CACnB,MAAKP,KAAL,CAAWU,QAAX,CAAoBC,OADD,EAEnB,MAAKX,KAAL,CAAWE,KAFQ,EAGnB,MAAKF,KAAL,CAAWY,YAAX,GAA0B;eAAM,MAAKZ,KAAL,CAAWY,YAAX,+BAAN;OAA1B,GAAgEC,SAH7C,CAArB;;YAKKb,KAAL,CAAWc,WAAX,CAAuB,MAAKL,MAA5B;;;;;;;;wCA7CkB;UACd,CAACF,OAAL,EAAc;aACPQ,QAAL,CAAc;UAAEC,SAAS,EAAE;SAA3B;OADF,MAEO,IAAI,KAAKC,YAAL,MAAuB,CAAC,KAAKC,UAAL,EAA5B,EAA+C;aAC/CH,QAAL,CAAc;UAAEC,SAAS,EAAE;SAA3B;OADK,MAEA;aACAG,WAAL;;;;;;2CAKmB;UACjB,KAAKV,MAAT,EAAiB;aACVT,KAAL,CAAWoB,QAAX,CAAoB,IAApB;aACKX,MAAL,CAAYY,OAAZ;;;;;;;;6BAqCK;wBACsD,KAAKrB,KAD3D;UACCE,KADD,eACCA,KADD;UACQU,YADR,eACQA,YADR;UACsBF,QADtB,eACsBA,QADtB;UACgCY,QADhC,eACgCA,QADhC;UAC6CC,IAD7C;;UAEH,KAAKC,KAAL,CAAWR,SAAX,KAAyB,SAA7B,EAAwC;eAC/B,mDAAP;;;UAEE,KAAKQ,KAAL,CAAWR,SAAX,KAAyB,SAA7B,EAAwC;eAC/B,8DAAP;;;aAGA;;SACE;QACE,SAAS,EAAC,UADZ;QAEE,QAAQ,MAFV;QAGE,OAAO,EAAC;SACJO,IAJN;QAKE,GAAG,EAAE,KAAKvB,KAAL,CAAWU;SANpB,CADF;;;;;EAhFsBe,KAAK,CAACC;;gBAA1B3B,6BACkB;EACpB4B,EAAE,EAAE,MADgB;EAEpBC,SAAS,EAAE,2BAFS;EAGpBC,KAAK,EAAE,KAHa;EAIpBC,MAAM,EAAE,KAJY;EAKpB5B,KAAK,EAAE;IACLC,SAAS,EAAE,CAAC,SAAD,CADN;IAEL4B,OAAO,EAAE,CACP;MACEC,IAAI,EAAE,eADR;MAEEC,GAAG,EAAE;KAHA;GAPS;EAcpBvB,QAAQ,EAAEe,KAAK,CAACS,SAAN,EAdU;EAepBpB,WAAW,EAAE,uBAAM;;;;;"}